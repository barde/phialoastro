name = "phialo-design"
main = "src/index.ts"
compatibility_date = "2024-09-25"
workers_dev = true

# Note: Preview deployments are handled automatically by Cloudflare
# Every version upload creates a preview URL in the format:
# <VERSION_PREFIX>-<WORKER_NAME>.<SUBDOMAIN>.workers.dev

[assets]
directory = "../phialo-design/dist"
binding = "ASSETS"

[build]
command = "npm run build"
cwd = "../phialo-design"

# Development environment (default)
[vars]
ENVIRONMENT = "development"

# Production environment
[env.production]
name = "phialo-design"
# Zone ID is passed via command line flag during deployment
# This avoids committing sensitive information to the repository
workers_dev = false

[env.production.vars]
ENVIRONMENT = "production"
# Note: WEB3FORMS_ACCESS_KEY must be set in Cloudflare dashboard under Worker settings

# Test environment for running tests
[env.test]
name = "phialo-design-test"
workers_dev = true
main = "src/index.ts" # Use full implementation for tests

[env.test.vars]
ENVIRONMENT = "test"