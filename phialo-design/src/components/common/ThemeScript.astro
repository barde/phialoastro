---
// This component adds the theme initialization script
---

<script is:inline>
  // Theme initialization script - runs before page renders to prevent flash
  (function() {
    // Get saved theme or use system preference
    const savedTheme = localStorage.getItem('theme');
    const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    const theme = savedTheme || systemTheme;
    
    // Apply dark class if needed
    if (theme === 'dark') {
      document.documentElement.classList.add('dark');
    }
    
    // Save system preference if no saved theme
    if (!savedTheme) {
      localStorage.setItem('theme', theme);
    }
  })();
</script>