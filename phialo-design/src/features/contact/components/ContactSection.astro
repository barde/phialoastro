---
import ContactFormWrapper from './ContactFormWrapper';
import ContactFormErrorBoundary from './ContactFormErrorBoundary';

// Language detection based on URL pathname
const currentPath = Astro.url.pathname;
const isEnglish = currentPath.startsWith('/en/');

// Translation objects
const translations = {
  de: {
    title: 'Kontakt',
    subtitle: 'Haben Sie eine Schmuckidee? Benötigen Sie eine Beratung? Kontaktieren Sie uns für eine unverbindliche Anfrage.',
    formTitle: 'Nachricht senden',
    contactInfoTitle: 'Direkte Kontaktdaten',
    emailLabel: 'Email',
    phoneContactLabel: 'Telefon',
    locationLabel: 'Standort',
    locationValue: 'Deutschland',
    socialTitle: 'Folgen Sie uns',
    instagramDescription: 'Portfolio auf Instagram',
    youtubeDescription: 'Kostenlose Tutorials',
    responseTime: 'Wir antworten normalerweise innerhalb von 24 Stunden'
  },
  en: {
    title: 'Contact',
    subtitle: 'Have a jewelry idea? Need consultation? Contact us for a non-binding inquiry.',
    formTitle: 'Send Message',
    contactInfoTitle: 'Direct Contact Information',
    phoneContactLabel: 'Phone',
    locationLabel: 'Location',
    locationValue: 'Germany',
    socialTitle: 'Follow Us',
    instagramDescription: 'Portfolio on Instagram',
    youtubeDescription: 'Free Tutorials',
    responseTime: 'We typically respond within 24 hours'
  }
};

const t = translations[isEnglish ? 'en' : 'de'];
---

<section id="contact" class="py-24 bg-midnight text-white">
  <div class="container mx-auto px-6">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="font-display text-4xl md:text-5xl font-medium mb-6">
        {t.title}
      </h2>
      <p class="text-lg text-gray-300 max-w-2xl mx-auto leading-relaxed">
        {t.subtitle}
      </p>
    </div>

    <div class="max-w-6xl mx-auto">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        <!-- Contact Form on the left -->
        <div class="bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10">
          <h3 class="font-display text-2xl font-medium mb-6">{t.formTitle}</h3>
          
          <!-- React Contact Form with Error Boundary and Pre-clearance -->
          <ContactFormErrorBoundary client:load>
            <ContactFormWrapper client:load usePreClearance={true} />
          </ContactFormErrorBoundary>

          <!-- Contact info below form -->
          <div class="mt-8 pt-8 border-t border-white/10">
            <div class="space-y-3">
              <div class="flex items-center space-x-3">
                <svg class="w-5 h-5 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                </svg>
                <a href="mailto:kontakt@phialo.de" class="text-gold hover:text-gold/80 transition-colors">
                  kontakt@phialo.de
                </a>
              </div>
              <div class="flex items-center space-x-3">
                <svg class="w-5 h-5 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                </svg>
                <a href="tel:+4915785664700" class="text-gold hover:text-gold/80 transition-colors">
                  (+49) 1578 566 47 00
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- Image on the right -->
        <div class="relative">
          <img 
            src="/gesa-portrait.jpg" 
            alt="Gesa Pickbrenner"
            class="w-full h-auto rounded-lg shadow-2xl"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-midnight/50 to-transparent rounded-lg"></div>
        </div>
      </div>

      <!-- Social links at bottom -->
      <div class="mt-16 text-center">
        <p class="text-gray-300 mb-6">{t.socialTitle}</p>
        <div class="flex justify-center space-x-6">
          <a 
            href="https://www.instagram.com/phialo_design/" 
            target="_blank" 
            rel="noopener noreferrer"
            class="w-12 h-12 bg-white/10 rounded-full flex items-center justify-center hover:bg-gold/20 transition-colors group"
          >
            <svg class="w-6 h-6 text-gray-300 group-hover:text-gold transition-colors" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.621 5.367 11.988 11.988 11.988s11.987-5.367 11.987-11.988C24.004 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.349-1.051-2.349-2.348s1.051-2.349 2.349-2.349c1.296 0 2.347 1.052 2.347 2.349s-1.051 2.348-2.347 2.348zm7.119 0c-1.297 0-2.349-1.051-2.349-2.348s1.052-2.349 2.349-2.349c1.297 0 2.348 1.052 2.348 2.349s-1.051 2.348-2.348 2.348z"/>
            </svg>
          </a>
          <a 
            href="https://www.youtube.com/channel/UCW20BczLnN1SehPu-Me4t0g" 
            target="_blank" 
            rel="noopener noreferrer"
            class="w-12 h-12 bg-white/10 rounded-full flex items-center justify-center hover:bg-gold/20 transition-colors group"
          >
            <svg class="w-6 h-6 text-gray-300 group-hover:text-gold transition-colors" fill="currentColor" viewBox="0 0 24 24">
              <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
            </svg>
          </a>
        </div>
        <p class="text-gray-300 text-sm mt-6">
          {t.responseTime}
        </p>
      </div>
    </div>
  </div>
</section>

<style>
  /* Form focus styles are now handled in the React component */
</style>
