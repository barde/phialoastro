---
interface Props {
  className?: string;
  strength?: number;
}

const { className = '', strength = 0.3 } = Astro.props;
---

<div class={`magnetic-cursor ${className}`} data-strength={strength}>
  <slot />
</div>

<style>
  .magnetic-cursor {
    position: relative;
    transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    will-change: transform;
    cursor: pointer;
  }

  /* Create an invisible larger hit area for the magnetic effect */
  .magnetic-cursor::before {
    content: '';
    position: absolute;
    top: -30px;
    left: -30px;
    right: -30px;
    bottom: -30px;
    z-index: -1;
  }

  /* Hover effect with perspective for 3D feel */
  .magnetic-cursor:hover {
    transform: perspective(1000px) rotateX(2deg) rotateY(2deg) scale(1.02);
  }

  /* Different hover directions for variety */
  .magnetic-cursor:hover:active {
    transform: perspective(1000px) rotateX(1deg) rotateY(1deg) scale(0.98);
  }

  /* Smooth return to original position */
  .magnetic-cursor:not(:hover) {
    transform: perspective(1000px) rotateX(0) rotateY(0) scale(1);
  }

  /* Performance optimization for mobile - disable on touch devices */
  @media (hover: none) and (pointer: coarse) {
    .magnetic-cursor::before {
      display: none;
    }
    
    .magnetic-cursor:hover {
      transform: none;
    }
  }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    .magnetic-cursor {
      transition: none;
    }
    
    .magnetic-cursor:hover {
      transform: none;
    }
  }
</style>